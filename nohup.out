[2022-05-19 14:57:56 +0200] [453629] [INFO] Starting gunicorn 20.1.0
[2022-05-19 14:57:56 +0200] [453629] [INFO] Listening at: http://0.0.0.0:8050 (453629)
[2022-05-19 14:57:56 +0200] [453629] [INFO] Using worker: gevent
[2022-05-19 14:57:56 +0200] [456642] [INFO] Booting worker with pid: 456642
2022-05-19 14:57:56.521 INFO main - <module>: Starting import chain	MemTotal: 34.20703125
2022-05-19 14:57:59.085 INFO app - <module>: Memory use before any global variable declaration	MemTotal: 247.703125
2022-05-19 14:57:59.085 INFO maldi_data - __init__: Initializing MaldiData object	MemTotal: 247.703125
2022-05-19 14:57:59.161 INFO maldi_data - __init__: MaldiData object instantiated	MemTotal: 279.45703125
2022-05-19 14:57:59.162 INFO atlas - __init__: Initializing Atlas object	MemTotal: 279.45703125
2022-05-19 14:57:59.422 INFO storage - return_shelved_object: Returning atlas/atlas_objects/dic_acronym_children_id from shelve file.	MemTotal: 289.328125
2022-05-19 14:58:00.501 INFO storage - return_shelved_object: Returning atlas/atlas_objects/hierarchy from shelve file.	MemTotal: 510.3125
2022-05-19 14:58:00.620 INFO storage - return_shelved_object: Returning atlas/atlas_objects/arrays_projection_corrected_True_True from shelve file.	MemTotal: 510.42578125
2022-05-19 14:58:01.207 INFO storage - return_shelved_object: Returning atlas/atlas_objects/arrays_projection_corrected_True_True from shelve file.	MemTotal: 661.4453125
2022-05-19 14:58:01.931 INFO atlas - __init__: Atlas object instantiated	MemTotal: 694.81640625
2022-05-19 14:58:01.931 INFO figures - __init__: Initializing Figures object	MemTotal: 694.81640625
2022-05-19 14:58:02.049 INFO storage - return_shelved_object: Returning figures/lipid_selection/dic_normalization_factors_None from shelve file.	MemTotal: 695.18359375
2022-05-19 14:58:02.761 INFO figures - __init__: Figures object instantiated	MemTotal: 695.40625
2022-05-19 14:58:02.762 INFO app - <module>: Memory use after three main object have been instantiated	MemTotal: 695.40625
2022-05-19 14:58:03.020 INFO launch - run_compiled_functions: Please wait while compiled functions are executed...
2022-05-19 14:58:14.279 INFO figures - compute_3D_volume_figure: Starting 3D volume computation
2022-05-19 14:58:14.398 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_annotation_6 from shelve file.	MemTotal: 832.75
2022-05-19 14:58:15.014 INFO figures - compute_3D_volume_figure: Computed basic structure array
2022-05-19 14:58:15.135 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 838.34765625
2022-05-19 14:58:15.253 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 838.34765625
2022-05-19 14:58:15.372 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 838.34765625
2022-05-19 14:58:15.373 INFO figures - compute_3D_volume_figure: Averaged expression over all lipids
2022-05-19 14:58:15.373 INFO figures - compute_array_coordinates_3D: Starting computing 3D arrays	MemTotal: 838.34765625
2022-05-19 14:58:15.373 DEBUG figures - compute_array_coordinates_3D: Size array_x: 19.53
2022-05-19 14:58:15.373 INFO figures - compute_array_coordinates_3D: Starting slice iteration	MemTotal: 838.34765625
2022-05-19 14:58:15.380 INFO figures - compute_3D_volume_figure: Computed array of expression in original space
2022-05-19 14:58:15.699 INFO figures - compute_3D_volume_figure: Filled basic structure array with array of expression
2022-05-19 14:58:15.707 INFO figures - compute_3D_volume_figure: Built arrays of coordinates
2022-05-19 14:58:16.520 INFO figures - compute_3D_volume_figure: Cropped the figure to only keep areas in which lipids are expressed
2022-05-19 14:58:17.135 INFO figures - compute_3D_volume_figure: Finished interpolation betwee slices
2022-05-19 14:58:17.254 INFO storage - return_shelved_object: Returning figures/3D_page/volume_root from shelve file.	MemTotal: 855.0078125
2022-05-19 14:58:17.283 INFO figures - compute_3D_volume_figure: Building final figure
2022-05-19 14:58:17.430 INFO figures - compute_3D_volume_figure: Done computing 3D volume figure
2022-05-19 14:58:17.436 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 14:58:17.436 INFO launch - run_compiled_functions: Compiled functions executed.
2022-05-19 14:58:17.556 INFO app - <module>: Memory use after main functions have been compiled	MemTotal: 806.7421875
2022-05-19 14:58:17.578 DEBUG filesystemcache - set: set key '__wz_cache_count'
2022-05-19 14:58:17.578 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:17.578 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 14:58:17.578 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:17.578 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 14:58:17.720 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 809.24609375
2022-05-19 14:58:17.736 INFO figures - compute_heatmap_per_mz: Starting figure computation, from mz boundaries
2022-05-19 14:58:17.736 INFO figures - compute_heatmap_per_mz: Getting image array
2022-05-19 14:58:17.736 INFO figures - compute_image_per_lipid: Entering compute_image_per_lipid
2022-05-19 14:58:17.736 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_image_using_index_and_image_lookup 
2022-05-19 14:58:17.736 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 14:58:17.736 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:17.737 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 14:58:18.406 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:18.406 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 14:58:18.406 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 14:58:18.406 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 14:58:18.407 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:18.407 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 14:58:18.407 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:18.407 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 14:58:18.407 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 14:58:18.831 INFO figures - build_lipid_heatmap_from_image: Converting image to string
2022-05-19 14:58:18.832 INFO image - convert_image_to_base64: Entering string conversion function
2022-05-19 14:58:18.873 INFO image - convert_image_to_base64: Image has been converted from array to PIL image
2022-05-19 14:58:18.915 INFO image - convert_image_to_base64: Empty pixels are now transparent
2022-05-19 14:58:18.934 INFO image - convert_image_to_base64: png mode selected, quality argument is not supported
2022-05-19 14:58:18.957 INFO image - convert_image_to_base64: Image has been converted to base64. Returning it now.
2022-05-19 14:58:18.958 INFO figures - build_lipid_heatmap_from_image: Converting image to go image
2022-05-19 14:58:18.983 INFO figures - build_lipid_heatmap_from_image: Returning figure
2022-05-19 14:58:19.108 INFO storage - return_shelved_object: Returning annotations/lipid_options from shelve file.	MemTotal: 813.328125
2022-05-19 14:58:19.267 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 813.328125
2022-05-19 14:58:19.410 INFO storage - return_shelved_object: Returning figures/atlas_page/3D/treemaps from shelve file.	MemTotal: 813.328125
2022-05-19 14:58:20.122 INFO index - render_page_content: Page/load-slice has been selected	MemTotal: 813.6171875
2022-05-19 14:58:20.268 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 813.6171875
2022-05-19 14:58:21.466 INFO index - render_page_content: Page/ has been selected	MemTotal: 813.6171875
2022-05-19 14:58:31.302 INFO index - render_page_content: Page/ has been selected	MemTotal: 813.64453125
2022-05-19 14:58:37.479 INFO index - render_page_content: Page/lipid-selection has been selected	MemTotal: 813.64453125
2022-05-19 14:58:37.480 INFO figures - compute_heatmap_per_mz: Starting figure computation, from mz boundaries
2022-05-19 14:58:37.480 INFO figures - compute_heatmap_per_mz: Getting image array
2022-05-19 14:58:37.480 INFO figures - compute_image_per_lipid: Entering compute_image_per_lipid
2022-05-19 14:58:37.480 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_image_using_index_and_image_lookup 
2022-05-19 14:58:37.480 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 14:58:37.480 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:37.481 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 14:58:37.536 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:37.536 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 14:58:37.536 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 14:58:37.536 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 14:58:37.537 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:37.537 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 14:58:37.537 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:37.538 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 14:58:37.538 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 14:58:37.549 INFO figures - build_lipid_heatmap_from_image: Converting image to string
2022-05-19 14:58:37.549 INFO image - convert_image_to_base64: Entering string conversion function
2022-05-19 14:58:37.595 INFO image - convert_image_to_base64: Image has been converted from array to PIL image
2022-05-19 14:58:37.640 INFO image - convert_image_to_base64: Empty pixels are now transparent
2022-05-19 14:58:37.660 INFO image - convert_image_to_base64: png mode selected, quality argument is not supported
2022-05-19 14:58:37.681 INFO image - convert_image_to_base64: Image has been converted to base64. Returning it now.
2022-05-19 14:58:37.681 INFO figures - build_lipid_heatmap_from_image: Converting image to go image
2022-05-19 14:58:37.707 INFO figures - build_lipid_heatmap_from_image: Returning figure
2022-05-19 14:58:37.832 INFO storage - return_shelved_object: Returning annotations/lipid_options from shelve file.	MemTotal: 813.64453125
2022-05-19 14:58:38.129 INFO lipid_selection - page_2_add_toast_selection: Entering function to update lipid data
2022-05-19 14:58:39.601 INFO lipid_selection - page_2_plot_graph_heatmap_mz_selection: Entering function to plot heatmap or RGB depending on lipid selection
2022-05-19 14:58:40.951 INFO lipid_selection - page_2_add_toast_selection: Entering function to update lipid data
2022-05-19 14:58:40.951 INFO lipid_selection - page_2_add_toast_selection: Returning updated lipid data
2022-05-19 14:58:41.108 INFO lipid_selection - page_2_plot_graph_heatmap_mz_selection: Entering function to plot heatmap or RGB depending on lipid selection
2022-05-19 14:58:41.108 INFO figures - compute_heatmap_per_mz: Starting figure computation, from mz boundaries
2022-05-19 14:58:41.108 INFO figures - compute_heatmap_per_mz: Getting image array
2022-05-19 14:58:41.109 INFO figures - compute_image_per_lipid: Entering compute_image_per_lipid
2022-05-19 14:58:41.109 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_image_using_index_and_image_lookup 
2022-05-19 14:58:41.109 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 14:58:41.109 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:41.110 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 14:58:41.221 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:41.221 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 14:58:41.221 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 14:58:41.221 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 14:58:41.222 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:41.222 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 14:58:41.223 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:41.223 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 14:58:41.223 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 14:58:41.247 INFO figures - build_lipid_heatmap_from_image: Converting image to string
2022-05-19 14:58:41.247 INFO image - convert_image_to_base64: Entering string conversion function
2022-05-19 14:58:41.288 INFO image - convert_image_to_base64: Image has been converted from array to PIL image
2022-05-19 14:58:41.329 INFO image - convert_image_to_base64: Empty pixels are now transparent
2022-05-19 14:58:41.348 INFO image - convert_image_to_base64: png mode selected, quality argument is not supported
2022-05-19 14:58:41.362 INFO image - convert_image_to_base64: Image has been converted to base64. Returning it now.
2022-05-19 14:58:41.362 INFO figures - build_lipid_heatmap_from_image: Converting image to go image
2022-05-19 14:58:41.386 INFO figures - build_lipid_heatmap_from_image: Returning figure
2022-05-19 14:58:41.391 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_index_boundaries 
2022-05-19 14:58:41.391 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 14:58:41.391 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:41.392 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 14:58:41.657 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:41.657 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 14:58:41.657 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 14:58:41.657 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 14:58:41.657 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:41.658 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 14:58:41.658 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:41.658 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 14:58:41.658 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 14:58:41.658 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function Figures.compute_spectrum_high_res.
2022-05-19 14:58:41.659 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 14:58:41.659 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:41.659 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 14:58:41.659 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:41.659 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 14:58:41.660 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 14:58:41.660 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 14:58:41.660 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:41.660 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 14:58:41.660 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:58:41.660 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 14:58:41.660 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 14:58:45.899 INFO index - render_page_content: Page/region-analysis has been selected	MemTotal: 813.6953125
2022-05-19 14:58:46.080 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_6_False from shelve file.	MemTotal: 813.6953125
2022-05-19 14:58:48.392 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_6_False from shelve file.	MemTotal: 813.6953125
2022-05-19 14:58:49.442 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_6_False from shelve file.	MemTotal: 813.6953125
2022-05-19 14:58:52.751 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_6_False from shelve file.	MemTotal: 813.6953125
2022-05-19 14:58:52.836 INFO region_analysis - draw_modal_graph: Modal graph function triggered with input page-3-reset-button
2022-05-19 14:58:52.836 INFO region_analysis - draw_modal_graph: Resetting modal graph
2022-05-19 14:58:54.672 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_6_False from shelve file.	MemTotal: 813.6953125
2022-05-19 14:58:55.650 INFO region_analysis - draw_modal_graph: Modal graph function triggered with input page-3-reset-button
2022-05-19 14:58:55.651 INFO region_analysis - draw_modal_graph: Resetting modal graph
2022-05-19 14:58:55.832 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_6_False from shelve file.	MemTotal: 813.6953125
2022-05-19 14:58:57.005 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_6_False from shelve file.	MemTotal: 813.6953125
2022-05-19 14:58:58.009 INFO region_analysis - draw_modal_graph: Modal graph function triggered with input page-3-reset-button
2022-05-19 14:58:58.009 INFO region_analysis - draw_modal_graph: Resetting modal graph
2022-05-19 14:59:02.882 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_6_False from shelve file.	MemTotal: 813.6953125
2022-05-19 14:59:05.494 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_6_False from shelve file.	MemTotal: 813.6953125
2022-05-19 14:59:06.934 INFO region_analysis - page_3_display_high_res_mz_plot: Compute spectra button has been clicked
2022-05-19 14:59:06.934 INFO region_analysis - page_3_display_high_res_mz_plot: One or several shapes have been selected, displaying graphs
2022-05-19 14:59:06.939 INFO region_analysis - page_3_record_spectra: Starting to compute spectrum
2022-05-19 14:59:06.940 DEBUG filesystemcache - delete: deleted key 'pages.region_analysis.global_spectrum_store_memver'
2022-05-19 14:59:06.940 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:06.941 DEBUG filesystemcache - set: set key '__wz_cache_count'
2022-05-19 14:59:06.941 DEBUG filesystemcache - get: get key 'pages.region_analysis.global_spectrum_store_memver' -> miss (expired)
2022-05-19 14:59:06.941 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:06.941 DEBUG filesystemcache - set: set key 'pages.region_analysis.global_spectrum_store_memver'
2022-05-19 14:59:06.941 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:06.941 DEBUG filesystemcache - set: set key '__wz_cache_count'
2022-05-19 14:59:06.942 DEBUG filesystemcache - get: get key 'I6Hu2cb4Hqeif8XdWz/XsG' -> miss 
2022-05-19 14:59:06.942 INFO region_analysis - global_spectrum_store: Computing spectra now
2022-05-19 14:59:06.942 INFO region_analysis - global_spectrum_store: Start computing path
2022-05-19 14:59:06.942 INFO region_analysis - global_spectrum_store: Computing path finished
2022-05-19 14:59:06.943 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_spectrum_per_row_selection 
2022-05-19 14:59:06.943 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 14:59:06.943 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:06.943 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 14:59:07.183 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:07.183 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 14:59:07.183 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 14:59:07.184 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 14:59:07.184 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:07.184 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 14:59:07.184 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:07.185 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 14:59:07.185 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 14:59:07.186 INFO region_analysis - global_spectrum_store: Start computing path
2022-05-19 14:59:07.186 INFO region_analysis - global_spectrum_store: Computing path finished
2022-05-19 14:59:07.187 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_spectrum_per_row_selection 
2022-05-19 14:59:07.187 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 14:59:07.187 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:07.187 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 14:59:07.322 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:07.323 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 14:59:07.323 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 14:59:07.323 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 14:59:07.323 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:07.324 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 14:59:07.324 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:07.324 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 14:59:07.325 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 14:59:07.325 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:07.327 DEBUG filesystemcache - set: set key 'I6Hu2cb4Hqeif8XdWz/XsG'
2022-05-19 14:59:07.327 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:07.327 DEBUG filesystemcache - set: set key '__wz_cache_count'
2022-05-19 14:59:07.327 INFO region_analysis - page_3_record_spectra: Spectra computed, returning it now
2022-05-19 14:59:07.429 INFO region_analysis - page_3_draw_heatmap_per_lipid_selection: Starting computing heatmap now
2022-05-19 14:59:07.429 DEBUG filesystemcache - get: get key 'pages.region_analysis.global_spectrum_store_memver' -> hit 
2022-05-19 14:59:07.430 DEBUG filesystemcache - get: get key 'I6Hu2cb4Hqeif8XdWz/XsG' -> hit 
2022-05-19 14:59:07.430 INFO spectra - global_lipid_index_store: Starting computing ll_idx_labels
2022-05-19 14:59:07.701 INFO spectra - global_lipid_index_store: Returning ll_idx_labels
2022-05-19 14:59:07.825 INFO region_analysis - page_3_draw_heatmap_per_lipid_selection: Heatmap computed. Returning it now
2022-05-19 14:59:07.829 INFO region_analysis - page_3_plot_spectrum: Starting spectra plotting now
2022-05-19 14:59:07.830 DEBUG filesystemcache - get: get key 'pages.region_analysis.global_spectrum_store_memver' -> hit 
2022-05-19 14:59:07.831 DEBUG filesystemcache - get: get key 'I6Hu2cb4Hqeif8XdWz/XsG' -> hit 
2022-05-19 14:59:07.831 INFO spectra - global_lipid_index_store: Starting computing ll_idx_labels
2022-05-19 14:59:07.834 INFO spectra - global_lipid_index_store: Returning ll_idx_labels
2022-05-19 14:59:08.471 INFO region_analysis - page_3_plot_spectrum: Spectra plotted. Returning it now
2022-05-19 14:59:08.679 INFO region_analysis - page_3_fill_dropdown_options: Starting computing lipid dropdown now.
2022-05-19 14:59:08.753 INFO region_analysis - page_3_fill_dropdown_options: Dropdown values computed. Updating it with new lipids now.
2022-05-19 14:59:08.875 INFO region_analysis - draw_modal_graph: Modal graph function triggered with input page-3-open-modal
2022-05-19 14:59:08.876 INFO region_analysis - draw_modal_graph: At least one lipid has been selected, starting computing modal graph now.
2022-05-19 14:59:08.878 INFO figures - compute_rgb_image_per_lipid_selection: Started RGB image computation for slice 7	MemTotal: 829.7890625
2022-05-19 14:59:08.878 INFO figures - compute_rgb_image_per_lipid_selection: Acquiring array_image for slice 7	MemTotal: 829.7890625
2022-05-19 14:59:08.880 INFO figures - compute_image_per_lipid: Entering compute_image_per_lipid
2022-05-19 14:59:08.880 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_image_using_index_and_image_lookup 
2022-05-19 14:59:08.880 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 14:59:08.880 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:08.881 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 14:59:09.008 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:09.010 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 14:59:09.010 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 14:59:09.010 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 14:59:09.010 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:09.010 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 14:59:09.011 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:09.011 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 14:59:09.012 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 14:59:09.040 INFO figures - compute_image_per_lipid: Entering compute_image_per_lipid
2022-05-19 14:59:09.041 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_image_using_index_and_image_lookup 
2022-05-19 14:59:09.041 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 14:59:09.041 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:09.041 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 14:59:09.110 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:09.110 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 14:59:09.110 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 14:59:09.110 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 14:59:09.111 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:09.111 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 14:59:09.111 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:09.111 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 14:59:09.112 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 14:59:09.131 INFO figures - compute_image_per_lipid: Entering compute_image_per_lipid
2022-05-19 14:59:09.131 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_image_using_index_and_image_lookup 
2022-05-19 14:59:09.131 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 14:59:09.131 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:09.131 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 14:59:09.194 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:09.194 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 14:59:09.194 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 14:59:09.194 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 14:59:09.194 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:09.194 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 14:59:09.195 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 14:59:09.195 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 14:59:09.195 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 14:59:09.238 INFO figures - compute_rgb_image_per_lipid_selection: Returning fig for slice 7	MemTotal: 829.7890625
2022-05-19 14:59:09.238 INFO figures - build_lipid_heatmap_from_image: Converting image to string
2022-05-19 14:59:09.238 INFO image - convert_image_to_base64: Entering string conversion function
2022-05-19 14:59:09.259 INFO image - convert_image_to_base64: Image has been converted from array to PIL image
2022-05-19 14:59:09.300 INFO image - convert_image_to_base64: Empty pixels are now transparent
2022-05-19 14:59:09.319 INFO image - convert_image_to_base64: png mode selected, quality argument is not supported
2022-05-19 14:59:09.340 INFO image - convert_image_to_base64: Image has been converted to base64. Returning it now.
2022-05-19 14:59:09.340 INFO figures - build_lipid_heatmap_from_image: Converting image to go image
2022-05-19 14:59:09.364 INFO figures - build_lipid_heatmap_from_image: Returning figure
2022-05-19 14:59:09.364 INFO region_analysis - draw_modal_graph: Modal graph computed. Returning it now
2022-05-19 14:59:41.019 INFO index - render_page_content: Page/ has been selected	MemTotal: 831.1328125
[2022-05-19 15:00:58 +0200] [294256] [INFO] Starting gunicorn 20.1.0
[2022-05-19 15:00:58 +0200] [294256] [ERROR] Connection in use: ('', 8050)
[2022-05-19 15:00:58 +0200] [294256] [ERROR] Retrying in 1 second.
[2022-05-19 15:00:59 +0200] [294256] [ERROR] Connection in use: ('', 8050)
[2022-05-19 15:00:59 +0200] [294256] [ERROR] Retrying in 1 second.
[2022-05-19 15:01:00 +0200] [294256] [ERROR] Connection in use: ('', 8050)
[2022-05-19 15:01:00 +0200] [294256] [ERROR] Retrying in 1 second.
[2022-05-19 15:01:01 +0200] [294256] [ERROR] Connection in use: ('', 8050)
[2022-05-19 15:01:01 +0200] [294256] [ERROR] Retrying in 1 second.
[2022-05-19 15:01:02 +0200] [294256] [ERROR] Connection in use: ('', 8050)
[2022-05-19 15:01:02 +0200] [294256] [ERROR] Retrying in 1 second.
[2022-05-19 15:01:03 +0200] [294256] [ERROR] Can't connect to ('', 8050)
2022-05-19 15:01:07.033 INFO index - render_page_content: Page/load-slice has been selected	MemTotal: 831.1328125
2022-05-19 15:01:07.145 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 831.1328125
2022-05-19 15:01:09.293 INFO load_slice - tab_1_load_image: Slider changed to value 7
2022-05-19 15:01:09.408 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_6_False from shelve file.	MemTotal: 831.1328125
2022-05-19 15:01:10.644 INFO load_slice - tab_1_load_image: Slider changed to value 10
2022-05-19 15:01:10.756 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_9_False from shelve file.	MemTotal: 830.8828125
2022-05-19 15:01:12.688 INFO index - render_page_content: Page/load-slice has been selected	MemTotal: 830.8828125
2022-05-19 15:01:12.804 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 830.8828125
2022-05-19 15:01:13.622 INFO index - render_page_content: Page/ has been selected	MemTotal: 830.8828125
2022-05-19 15:01:35.567 INFO index - render_page_content: Page/ has been selected	MemTotal: 830.8828125
2022-05-19 15:02:53.103 INFO index - render_page_content: Page/load-slice has been selected	MemTotal: 830.8828125
2022-05-19 15:02:53.230 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 830.8828125
2022-05-19 15:02:56.859 INFO storage - return_shelved_object: Returning figures/3D_page/slices_3D from shelve file.	MemTotal: 830.8828125
2022-05-19 15:03:11.761 INFO index - render_page_content: Page/lipid-selection has been selected	MemTotal: 830.8828125
2022-05-19 15:03:11.761 INFO figures - compute_heatmap_per_mz: Starting figure computation, from mz boundaries
2022-05-19 15:03:11.761 INFO figures - compute_heatmap_per_mz: Getting image array
2022-05-19 15:03:11.762 INFO figures - compute_image_per_lipid: Entering compute_image_per_lipid
2022-05-19 15:03:11.762 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_image_using_index_and_image_lookup 
2022-05-19 15:03:11.762 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:11.762 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:11.763 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:11.816 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:11.816 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:11.816 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 15:03:11.816 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:11.816 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:11.816 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:11.817 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:11.817 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:11.817 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 15:03:11.831 INFO figures - build_lipid_heatmap_from_image: Converting image to string
2022-05-19 15:03:11.832 INFO image - convert_image_to_base64: Entering string conversion function
2022-05-19 15:03:11.875 INFO image - convert_image_to_base64: Image has been converted from array to PIL image
2022-05-19 15:03:11.914 INFO image - convert_image_to_base64: Empty pixels are now transparent
2022-05-19 15:03:11.933 INFO image - convert_image_to_base64: png mode selected, quality argument is not supported
2022-05-19 15:03:11.953 INFO image - convert_image_to_base64: Image has been converted to base64. Returning it now.
2022-05-19 15:03:11.953 INFO figures - build_lipid_heatmap_from_image: Converting image to go image
2022-05-19 15:03:11.976 INFO figures - build_lipid_heatmap_from_image: Returning figure
2022-05-19 15:03:12.103 INFO storage - return_shelved_object: Returning annotations/lipid_options from shelve file.	MemTotal: 830.8828125
2022-05-19 15:03:12.363 INFO lipid_selection - page_2_add_toast_selection: Entering function to update lipid data
2022-05-19 15:03:12.534 INFO lipid_selection - page_2_plot_graph_heatmap_mz_selection: Entering function to plot heatmap or RGB depending on lipid selection
2022-05-19 15:03:15.388 INFO lipid_selection - page_2_add_toast_selection: Entering function to update lipid data
2022-05-19 15:03:15.395 INFO lipid_selection - page_2_add_toast_selection: Changes have been made to the lipid selection or indexation, propagating callback.
2022-05-19 15:03:15.513 INFO lipid_selection - page_2_plot_graph_heatmap_mz_selection: Entering function to plot heatmap or RGB depending on lipid selection
2022-05-19 15:03:15.514 INFO lipid_selection - page_2_plot_graph_heatmap_mz_selection: Right before calling the graphing function
2022-05-19 15:03:15.515 INFO figures - compute_rgb_image_per_lipid_selection: Started RGB image computation for slice 1	MemTotal: 830.9140625
2022-05-19 15:03:15.515 INFO figures - compute_rgb_image_per_lipid_selection: Acquiring array_image for slice 1	MemTotal: 830.9140625
2022-05-19 15:03:15.519 INFO figures - compute_image_per_lipid: Entering compute_image_per_lipid
2022-05-19 15:03:15.519 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_image_using_index_and_image_lookup 
2022-05-19 15:03:15.519 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:15.519 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:15.520 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:15.591 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:15.592 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:15.592 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 15:03:15.592 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:15.592 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:15.592 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:15.592 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:15.593 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:15.593 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 15:03:15.602 INFO figures - compute_image_per_lipid: Normalization made with to percentile computed across all slices.
2022-05-19 15:03:15.642 INFO figures - compute_rgb_image_per_lipid_selection: Returning fig for slice 1	MemTotal: 854.51171875
2022-05-19 15:03:15.642 INFO figures - build_lipid_heatmap_from_image: Converting image to string
2022-05-19 15:03:15.643 INFO image - convert_image_to_base64: Entering string conversion function
2022-05-19 15:03:15.662 INFO image - convert_image_to_base64: Image has been converted from array to PIL image
2022-05-19 15:03:15.700 INFO image - convert_image_to_base64: Empty pixels are now transparent
2022-05-19 15:03:15.719 INFO image - convert_image_to_base64: png mode selected, quality argument is not supported
2022-05-19 15:03:15.741 INFO image - convert_image_to_base64: Image has been converted to base64. Returning it now.
2022-05-19 15:03:15.741 INFO figures - build_lipid_heatmap_from_image: Converting image to go image
2022-05-19 15:03:15.763 INFO figures - build_lipid_heatmap_from_image: Returning figure
2022-05-19 15:03:15.768 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_index_boundaries 
2022-05-19 15:03:15.769 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:15.769 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:15.769 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:15.769 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:15.769 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:15.769 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 15:03:15.769 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:15.770 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:15.770 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:15.770 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:15.770 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:15.770 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 15:03:15.770 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function Figures.compute_spectrum_high_res.
2022-05-19 15:03:15.771 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:15.771 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:15.771 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:15.771 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:15.771 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:15.771 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 15:03:15.771 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:15.771 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:15.772 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:15.772 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:15.772 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:15.772 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 15:03:20.529 INFO lipid_selection - page_2_plot_graph_heatmap_mz_selection: Entering function to plot heatmap or RGB depending on lipid selection
2022-05-19 15:03:23.979 INFO index - render_page_content: Page/region-analysis has been selected	MemTotal: 854.59765625
2022-05-19 15:03:24.103 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 854.59765625
2022-05-19 15:03:26.432 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 854.59765625
2022-05-19 15:03:27.451 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 854.59765625
2022-05-19 15:03:28.485 INFO region_analysis - page_3_display_high_res_mz_plot: Compute spectra button has been clicked
2022-05-19 15:03:28.485 INFO region_analysis - page_3_display_high_res_mz_plot: One or several shapes have been selected, displaying graphs
2022-05-19 15:03:28.508 INFO region_analysis - page_3_record_spectra: Starting to compute spectrum
2022-05-19 15:03:28.509 DEBUG filesystemcache - get: get key 'pages.region_analysis.global_spectrum_store_memver' -> hit 
2022-05-19 15:03:28.509 DEBUG filesystemcache - get: get key 'l5FH/AcA4vH8UF9OWz/XsG' -> miss 
2022-05-19 15:03:28.509 INFO region_analysis - global_spectrum_store: Computing spectra now
2022-05-19 15:03:28.509 INFO region_analysis - global_spectrum_store: Start computing path
2022-05-19 15:03:28.510 INFO region_analysis - global_spectrum_store: Computing path finished
2022-05-19 15:03:28.510 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_spectrum_per_row_selection 
2022-05-19 15:03:28.510 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:28.510 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:28.511 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:28.543 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:28.543 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:28.543 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 15:03:28.543 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:28.543 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:28.544 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:28.544 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:28.544 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:28.544 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 15:03:28.545 INFO region_analysis - global_spectrum_store: Start computing path
2022-05-19 15:03:28.545 INFO region_analysis - global_spectrum_store: Computing path finished
2022-05-19 15:03:28.545 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_spectrum_per_row_selection 
2022-05-19 15:03:28.545 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:28.545 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:28.545 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:28.560 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:28.560 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:28.560 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 15:03:28.560 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:28.560 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:28.560 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:28.561 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:28.561 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:28.561 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 15:03:28.561 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:28.562 DEBUG filesystemcache - set: set key 'l5FH/AcA4vH8UF9OWz/XsG'
2022-05-19 15:03:28.562 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:28.562 DEBUG filesystemcache - set: set key '__wz_cache_count'
2022-05-19 15:03:28.562 INFO region_analysis - page_3_record_spectra: Spectra computed, returning it now
2022-05-19 15:03:28.622 INFO region_analysis - page_3_plot_spectrum: Starting spectra plotting now
2022-05-19 15:03:28.624 DEBUG filesystemcache - get: get key 'pages.region_analysis.global_spectrum_store_memver' -> hit 
2022-05-19 15:03:28.625 DEBUG filesystemcache - get: get key 'l5FH/AcA4vH8UF9OWz/XsG' -> hit 
2022-05-19 15:03:28.625 INFO spectra - global_lipid_index_store: Starting computing ll_idx_labels
2022-05-19 15:03:28.631 INFO spectra - global_lipid_index_store: Returning ll_idx_labels
2022-05-19 15:03:28.807 INFO region_analysis - page_3_plot_spectrum: Spectra plotted. Returning it now
2022-05-19 15:03:28.913 INFO region_analysis - page_3_draw_heatmap_per_lipid_selection: Starting computing heatmap now
2022-05-19 15:03:28.913 DEBUG filesystemcache - get: get key 'pages.region_analysis.global_spectrum_store_memver' -> hit 
2022-05-19 15:03:28.914 DEBUG filesystemcache - get: get key 'l5FH/AcA4vH8UF9OWz/XsG' -> hit 
2022-05-19 15:03:28.914 INFO spectra - global_lipid_index_store: Starting computing ll_idx_labels
2022-05-19 15:03:28.916 INFO spectra - global_lipid_index_store: Returning ll_idx_labels
2022-05-19 15:03:29.021 INFO region_analysis - page_3_draw_heatmap_per_lipid_selection: Heatmap computed. Returning it now
2022-05-19 15:03:29.149 INFO region_analysis - page_3_fill_dropdown_options: Starting computing lipid dropdown now.
2022-05-19 15:03:29.291 INFO region_analysis - page_3_fill_dropdown_options: Dropdown values computed. Updating it with new lipids now.
2022-05-19 15:03:29.491 INFO region_analysis - draw_modal_graph: Modal graph function triggered with input page-3-open-modal
2022-05-19 15:03:29.491 INFO region_analysis - draw_modal_graph: At least one lipid has been selected, starting computing modal graph now.
2022-05-19 15:03:29.493 INFO figures - compute_rgb_image_per_lipid_selection: Started RGB image computation for slice 1	MemTotal: 855.34765625
2022-05-19 15:03:29.493 INFO figures - compute_rgb_image_per_lipid_selection: Acquiring array_image for slice 1	MemTotal: 855.34765625
2022-05-19 15:03:29.497 INFO figures - compute_image_per_lipid: Entering compute_image_per_lipid
2022-05-19 15:03:29.497 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_image_using_index_and_image_lookup 
2022-05-19 15:03:29.497 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:29.497 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:29.497 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:29.559 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:29.559 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:29.559 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 15:03:29.559 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:29.560 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:29.560 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:29.560 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:29.560 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:29.560 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 15:03:29.579 INFO figures - compute_image_per_lipid: Entering compute_image_per_lipid
2022-05-19 15:03:29.579 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_image_using_index_and_image_lookup 
2022-05-19 15:03:29.579 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:29.579 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:29.579 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:29.652 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:29.652 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:29.652 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 15:03:29.652 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:29.652 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:29.653 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:29.653 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:29.653 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:29.653 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 15:03:29.674 INFO figures - compute_image_per_lipid: Entering compute_image_per_lipid
2022-05-19 15:03:29.674 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_image_using_index_and_image_lookup 
2022-05-19 15:03:29.674 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:29.674 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:29.674 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:29.733 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:29.734 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:29.734 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 15:03:29.734 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:29.734 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:29.734 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:29.735 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:29.735 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:29.735 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 15:03:29.765 INFO figures - compute_rgb_image_per_lipid_selection: Returning fig for slice 1	MemTotal: 855.34765625
2022-05-19 15:03:29.765 INFO figures - build_lipid_heatmap_from_image: Converting image to string
2022-05-19 15:03:29.765 INFO image - convert_image_to_base64: Entering string conversion function
2022-05-19 15:03:29.784 INFO image - convert_image_to_base64: Image has been converted from array to PIL image
2022-05-19 15:03:29.823 INFO image - convert_image_to_base64: Empty pixels are now transparent
2022-05-19 15:03:29.842 INFO image - convert_image_to_base64: png mode selected, quality argument is not supported
2022-05-19 15:03:29.862 INFO image - convert_image_to_base64: Image has been converted to base64. Returning it now.
2022-05-19 15:03:29.862 INFO figures - build_lipid_heatmap_from_image: Converting image to go image
2022-05-19 15:03:29.885 INFO figures - build_lipid_heatmap_from_image: Returning figure
2022-05-19 15:03:29.885 INFO region_analysis - draw_modal_graph: Modal graph computed. Returning it now
2022-05-19 15:03:41.292 INFO region_analysis - page_3_draw_heatmap_per_lipid_selection: Starting computing heatmap now
2022-05-19 15:03:41.293 DEBUG filesystemcache - get: get key 'pages.region_analysis.global_spectrum_store_memver' -> hit 
2022-05-19 15:03:41.294 DEBUG filesystemcache - get: get key 'l5FH/AcA4vH8UF9OWz/XsG' -> hit 
2022-05-19 15:03:41.294 INFO spectra - global_lipid_index_store: Starting computing ll_idx_labels
2022-05-19 15:03:41.296 INFO spectra - global_lipid_index_store: Returning ll_idx_labels
2022-05-19 15:03:41.361 INFO region_analysis - page_3_draw_heatmap_per_lipid_selection: Heatmap computed. Returning it now
2022-05-19 15:03:41.471 INFO region_analysis - page_3_fill_dropdown_options: Starting computing lipid dropdown now.
2022-05-19 15:03:41.496 INFO region_analysis - page_3_fill_dropdown_options: Dropdown values computed. Updating it with new lipids now.
2022-05-19 15:03:41.583 INFO region_analysis - draw_modal_graph: Modal graph function triggered with input page-3-open-modal
2022-05-19 15:03:41.583 INFO region_analysis - draw_modal_graph: At least one lipid has been selected, starting computing modal graph now.
2022-05-19 15:03:41.585 INFO figures - compute_rgb_image_per_lipid_selection: Started RGB image computation for slice 1	MemTotal: 856.03515625
2022-05-19 15:03:41.585 INFO figures - compute_rgb_image_per_lipid_selection: Acquiring array_image for slice 1	MemTotal: 856.03515625
2022-05-19 15:03:41.586 INFO figures - compute_image_per_lipid: Entering compute_image_per_lipid
2022-05-19 15:03:41.586 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_image_using_index_and_image_lookup 
2022-05-19 15:03:41.586 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:41.586 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:41.586 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:41.668 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:41.669 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:41.669 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 15:03:41.669 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:41.669 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:41.669 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:41.670 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:41.670 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:41.670 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 15:03:41.686 INFO figures - compute_image_per_lipid: Entering compute_image_per_lipid
2022-05-19 15:03:41.687 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_image_using_index_and_image_lookup 
2022-05-19 15:03:41.687 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:41.687 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:41.687 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:41.773 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:41.774 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:41.774 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 15:03:41.774 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:41.774 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:41.774 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:41.775 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:41.775 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:41.775 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 15:03:41.791 INFO figures - compute_image_per_lipid: Entering compute_image_per_lipid
2022-05-19 15:03:41.791 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_image_using_index_and_image_lookup 
2022-05-19 15:03:41.791 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:41.792 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:41.792 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:41.873 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:41.874 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:03:41.874 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 15:03:41.874 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:03:41.874 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:41.874 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:41.874 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:03:41.875 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:03:41.875 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 15:03:41.900 INFO figures - compute_rgb_image_per_lipid_selection: Returning fig for slice 1	MemTotal: 856.10546875
2022-05-19 15:03:41.900 INFO figures - build_lipid_heatmap_from_image: Converting image to string
2022-05-19 15:03:41.900 INFO image - convert_image_to_base64: Entering string conversion function
2022-05-19 15:03:41.919 INFO image - convert_image_to_base64: Image has been converted from array to PIL image
2022-05-19 15:03:41.956 INFO image - convert_image_to_base64: Empty pixels are now transparent
2022-05-19 15:03:41.975 INFO image - convert_image_to_base64: png mode selected, quality argument is not supported
2022-05-19 15:03:41.992 INFO image - convert_image_to_base64: Image has been converted to base64. Returning it now.
2022-05-19 15:03:41.992 INFO figures - build_lipid_heatmap_from_image: Converting image to go image
2022-05-19 15:03:42.017 INFO figures - build_lipid_heatmap_from_image: Returning figure
2022-05-19 15:03:42.017 INFO region_analysis - draw_modal_graph: Modal graph computed. Returning it now
2022-05-19 15:03:45.411 INFO index - render_page_content: Page/3D-exploration has been selected	MemTotal: 856.21875
2022-05-19 15:03:45.540 INFO storage - return_shelved_object: Returning figures/atlas_page/3D/treemaps from shelve file.	MemTotal: 855.71875
2022-05-19 15:03:45.686 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 855.46875
allen mouse atlas (res. 100um)
From: http://www.brain-map.org (Wang et al 2020, https://doi.org/10.1016/j.cell.2020.04.007 )
2022-05-19 15:04:00.992 INFO threeD_exploration - page_4_plot_graph_volume: For the computation of 3D volume, decrease_resolution_factor is 10
2022-05-19 15:04:01.000 INFO figures - compute_3D_volume_figure: Starting 3D volume computation
2022-05-19 15:04:01.129 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_annotation_10 from shelve file.	MemTotal: 855.54296875
2022-05-19 15:04:01.136 INFO figures - compute_3D_volume_figure: Computed basic structure array
2022-05-19 15:04:01.262 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression_PG 36:2 k__ from shelve file.	MemTotal: 855.54296875
2022-05-19 15:04:01.441 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 855.54296875
2022-05-19 15:04:01.941 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 855.54296875
2022-05-19 15:04:01.956 INFO figures - compute_3D_volume_figure: Averaged expression over all lipids
2022-05-19 15:04:01.956 INFO figures - compute_array_coordinates_3D: Starting computing 3D arrays	MemTotal: 855.30078125
2022-05-19 15:04:01.957 DEBUG figures - compute_array_coordinates_3D: Size array_x: 19.53
2022-05-19 15:04:01.957 INFO figures - compute_array_coordinates_3D: Starting slice iteration	MemTotal: 855.30078125
2022-05-19 15:04:02.297 INFO figures - compute_array_coordinates_3D: Slice 1 done	MemTotal: 860.36328125
2022-05-19 15:04:02.308 INFO figures - compute_array_coordinates_3D: Slice 2 done	MemTotal: 860.76953125
2022-05-19 15:04:02.320 INFO figures - compute_array_coordinates_3D: Slice 3 done	MemTotal: 861.26171875
2022-05-19 15:04:02.336 INFO figures - compute_array_coordinates_3D: Slice 4 done	MemTotal: 861.8359375
2022-05-19 15:04:02.354 INFO figures - compute_array_coordinates_3D: Slice 5 done	MemTotal: 862.4921875
2022-05-19 15:04:02.371 INFO figures - compute_array_coordinates_3D: Slice 6 done	MemTotal: 864.01171875
2022-05-19 15:04:02.389 INFO figures - compute_array_coordinates_3D: Slice 7 done	MemTotal: 864.6640625
2022-05-19 15:04:02.408 INFO figures - compute_array_coordinates_3D: Slice 8 done	MemTotal: 865.4375
2022-05-19 15:04:02.424 INFO figures - compute_array_coordinates_3D: Slice 9 done	MemTotal: 866.1875
2022-05-19 15:04:02.443 INFO figures - compute_array_coordinates_3D: Slice 10 done	MemTotal: 867.05859375
2022-05-19 15:04:02.458 INFO figures - compute_array_coordinates_3D: Slice 11 done	MemTotal: 867.8515625
2022-05-19 15:04:02.477 INFO figures - compute_array_coordinates_3D: Slice 12 done	MemTotal: 868.62890625
2022-05-19 15:04:02.495 INFO figures - compute_array_coordinates_3D: Slice 13 done	MemTotal: 869.484375
2022-05-19 15:04:02.514 INFO figures - compute_array_coordinates_3D: Slice 14 done	MemTotal: 870.2578125
2022-05-19 15:04:02.534 INFO figures - compute_array_coordinates_3D: Slice 15 done	MemTotal: 870.9375
2022-05-19 15:04:02.552 INFO figures - compute_array_coordinates_3D: Slice 16 done	MemTotal: 871.6640625
2022-05-19 15:04:02.573 INFO figures - compute_array_coordinates_3D: Slice 17 done	MemTotal: 872.35546875
2022-05-19 15:04:02.586 INFO figures - compute_array_coordinates_3D: Slice 18 done	MemTotal: 872.90234375
2022-05-19 15:04:02.601 INFO figures - compute_array_coordinates_3D: Slice 19 done	MemTotal: 873.4296875
2022-05-19 15:04:02.614 INFO figures - compute_array_coordinates_3D: Slice 20 done	MemTotal: 873.91796875
2022-05-19 15:04:02.627 INFO figures - compute_array_coordinates_3D: Slice 21 done	MemTotal: 874.32421875
2022-05-19 15:04:02.640 INFO figures - compute_array_coordinates_3D: Slice 22 done	MemTotal: 874.77734375
2022-05-19 15:04:02.656 INFO figures - compute_array_coordinates_3D: Slice 23 done	MemTotal: 875.2890625
2022-05-19 15:04:02.669 INFO figures - compute_array_coordinates_3D: Slice 24 done	MemTotal: 875.8203125
2022-05-19 15:04:02.681 INFO figures - compute_array_coordinates_3D: Slice 25 done	MemTotal: 876.30078125
2022-05-19 15:04:02.696 INFO figures - compute_array_coordinates_3D: Slice 26 done	MemTotal: 876.83984375
2022-05-19 15:04:02.710 INFO figures - compute_array_coordinates_3D: Slice 27 done	MemTotal: 877.34765625
2022-05-19 15:04:02.728 INFO figures - compute_array_coordinates_3D: Slice 28 done	MemTotal: 877.84375
2022-05-19 15:04:02.744 INFO figures - compute_array_coordinates_3D: Slice 29 done	MemTotal: 878.28515625
2022-05-19 15:04:02.756 INFO figures - compute_array_coordinates_3D: Slice 30 done	MemTotal: 878.67578125
2022-05-19 15:04:02.766 INFO figures - compute_array_coordinates_3D: Slice 31 done	MemTotal: 878.9765625
2022-05-19 15:04:02.789 INFO figures - compute_3D_volume_figure: Computed array of expression in original space
2022-05-19 15:04:03.257 INFO figures - compute_3D_volume_figure: Filled basic structure array with array of expression
2022-05-19 15:04:03.259 INFO figures - compute_3D_volume_figure: Built arrays of coordinates
2022-05-19 15:04:03.279 INFO figures - compute_3D_volume_figure: Cropped the figure to only keep areas in which lipids are expressed
2022-05-19 15:04:03.280 INFO figures - compute_3D_volume_figure: Finished interpolation betwee slices
2022-05-19 15:04:03.406 INFO storage - return_shelved_object: Returning figures/3D_page/volume_root from shelve file.	MemTotal: 950.7578125
2022-05-19 15:04:03.417 INFO figures - compute_3D_volume_figure: Building final figure
2022-05-19 15:04:03.444 INFO figures - compute_3D_volume_figure: Done computing 3D volume figure
2022-05-19 15:04:18.816 INFO index - render_page_content: Page/ has been selected	MemTotal: 956.88671875
2022-05-19 15:06:18.197 INFO index - render_page_content: Page/ has been selected	MemTotal: 956.88671875
2022-05-19 15:06:25.352 INFO index - render_page_content: Page/load-slice has been selected	MemTotal: 956.88671875
2022-05-19 15:06:25.463 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 956.88671875
2022-05-19 15:06:26.391 INFO index - render_page_content: Page/ has been selected	MemTotal: 956.88671875
2022-05-19 15:06:29.673 INFO index - render_page_content: Page/lipid-selection has been selected	MemTotal: 956.765625
2022-05-19 15:06:29.673 INFO figures - compute_heatmap_per_mz: Starting figure computation, from mz boundaries
2022-05-19 15:06:29.673 INFO figures - compute_heatmap_per_mz: Getting image array
2022-05-19 15:06:29.673 INFO figures - compute_image_per_lipid: Entering compute_image_per_lipid
2022-05-19 15:06:29.673 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_image_using_index_and_image_lookup 
2022-05-19 15:06:29.673 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:06:29.673 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:06:29.674 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:06:29.722 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:06:29.722 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 15:06:29.722 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 15:06:29.722 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 15:06:29.722 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:06:29.723 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:06:29.723 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 15:06:29.723 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 15:06:29.723 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 15:06:29.732 INFO figures - build_lipid_heatmap_from_image: Converting image to string
2022-05-19 15:06:29.732 INFO image - convert_image_to_base64: Entering string conversion function
2022-05-19 15:06:29.751 INFO image - convert_image_to_base64: Image has been converted from array to PIL image
2022-05-19 15:06:29.788 INFO image - convert_image_to_base64: Empty pixels are now transparent
2022-05-19 15:06:29.805 INFO image - convert_image_to_base64: png mode selected, quality argument is not supported
2022-05-19 15:06:29.824 INFO image - convert_image_to_base64: Image has been converted to base64. Returning it now.
2022-05-19 15:06:29.824 INFO figures - build_lipid_heatmap_from_image: Converting image to go image
2022-05-19 15:06:29.843 INFO figures - build_lipid_heatmap_from_image: Returning figure
2022-05-19 15:06:29.956 INFO storage - return_shelved_object: Returning annotations/lipid_options from shelve file.	MemTotal: 956.765625
2022-05-19 15:06:30.241 INFO lipid_selection - page_2_add_toast_selection: Entering function to update lipid data
2022-05-19 15:06:30.456 INFO lipid_selection - page_2_plot_graph_heatmap_mz_selection: Entering function to plot heatmap or RGB depending on lipid selection
2022-05-19 15:06:30.866 INFO index - render_page_content: Page/ has been selected	MemTotal: 956.765625
[2022-05-19 16:12:53 +0200] [68114] [INFO] Starting gunicorn 20.1.0
[2022-05-19 16:12:53 +0200] [68114] [ERROR] Connection in use: ('', 8050)
[2022-05-19 16:12:53 +0200] [68114] [ERROR] Retrying in 1 second.
[2022-05-19 16:12:54 +0200] [68114] [ERROR] Connection in use: ('', 8050)
[2022-05-19 16:12:54 +0200] [68114] [ERROR] Retrying in 1 second.
[2022-05-19 16:12:55 +0200] [68114] [ERROR] Connection in use: ('', 8050)
[2022-05-19 16:12:55 +0200] [68114] [ERROR] Retrying in 1 second.
[2022-05-19 16:12:56 +0200] [68114] [ERROR] Connection in use: ('', 8050)
[2022-05-19 16:12:56 +0200] [68114] [ERROR] Retrying in 1 second.
[2022-05-19 16:12:57 +0200] [68114] [ERROR] Connection in use: ('', 8050)
[2022-05-19 16:12:57 +0200] [68114] [ERROR] Retrying in 1 second.
[2022-05-19 16:12:58 +0200] [68114] [ERROR] Can't connect to ('', 8050)
2022-05-19 16:13:18.308 INFO index - render_page_content: Page/ has been selected	MemTotal: 956.765625
2022-05-19 16:13:36.679 INFO index - render_page_content: Page/ has been selected	MemTotal: 956.765625
2022-05-19 16:13:47.724 INFO index - render_page_content: Page/ has been selected	MemTotal: 956.765625
[2022-05-19 16:14:04 +0200] [302020] [INFO] Starting gunicorn 20.1.0
[2022-05-19 16:14:04 +0200] [302020] [ERROR] Connection in use: ('', 8050)
[2022-05-19 16:14:04 +0200] [302020] [ERROR] Retrying in 1 second.
[2022-05-19 16:14:05 +0200] [302020] [ERROR] Connection in use: ('', 8050)
[2022-05-19 16:14:05 +0200] [302020] [ERROR] Retrying in 1 second.
[2022-05-19 16:14:06 +0200] [302020] [ERROR] Connection in use: ('', 8050)
[2022-05-19 16:14:06 +0200] [302020] [ERROR] Retrying in 1 second.
[2022-05-19 16:14:07 +0200] [302020] [ERROR] Connection in use: ('', 8050)
[2022-05-19 16:14:07 +0200] [302020] [ERROR] Retrying in 1 second.
[2022-05-19 16:14:08 +0200] [302020] [ERROR] Connection in use: ('', 8050)
[2022-05-19 16:14:08 +0200] [302020] [ERROR] Retrying in 1 second.
[2022-05-19 16:14:09 +0200] [302020] [ERROR] Can't connect to ('', 8050)
[2022-05-19 16:15:04 +0200] [302487] [INFO] Starting gunicorn 20.1.0
[2022-05-19 16:15:04 +0200] [302487] [ERROR] Connection in use: ('', 8050)
[2022-05-19 16:15:04 +0200] [302487] [ERROR] Retrying in 1 second.
[2022-05-19 16:15:05 +0200] [302487] [ERROR] Connection in use: ('', 8050)
[2022-05-19 16:15:05 +0200] [302487] [ERROR] Retrying in 1 second.
[2022-05-19 16:15:06 +0200] [302487] [ERROR] Connection in use: ('', 8050)
[2022-05-19 16:15:06 +0200] [302487] [ERROR] Retrying in 1 second.
[2022-05-19 16:15:07 +0200] [302487] [ERROR] Connection in use: ('', 8050)
[2022-05-19 16:15:07 +0200] [302487] [ERROR] Retrying in 1 second.
[2022-05-19 16:15:08 +0200] [302487] [ERROR] Connection in use: ('', 8050)
[2022-05-19 16:15:08 +0200] [302487] [ERROR] Retrying in 1 second.
[2022-05-19 16:15:09 +0200] [302487] [ERROR] Can't connect to ('', 8050)
2022-05-19 16:15:32.864 INFO index - render_page_content: Page/ has been selected	MemTotal: 956.765625
2022-05-19 16:15:46.026 INFO index - render_page_content: Page/ has been selected	MemTotal: 956.765625
2022-05-19 16:15:48.807 INFO index - render_page_content: Page/load-slice has been selected	MemTotal: 956.765625
2022-05-19 16:15:48.912 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 956.765625
2022-05-19 16:15:49.648 INFO index - render_page_content: Page/ has been selected	MemTotal: 956.765625
2022-05-19 16:18:53.975 INFO index - render_page_content: Page/ has been selected	MemTotal: 956.765625
2022-05-19 16:19:52.498 INFO index - render_page_content: Page/ has been selected	MemTotal: 956.765625
[2022-05-19 16:25:02 +0200] [453629] [INFO] Handling signal: hup
[2022-05-19 16:25:02 +0200] [453629] [INFO] Hang up: Master
[2022-05-19 16:25:02 +0200] [415593] [INFO] Booting worker with pid: 415593
[2022-05-19 16:25:02 +0200] [453629] [WARNING] Worker with pid 456642 was terminated due to signal 1
2022-05-19 16:25:02.784 INFO main - <module>: Starting import chain	MemTotal: 34.234375
2022-05-19 16:25:05.391 INFO app - <module>: Memory use before any global variable declaration	MemTotal: 247.609375
2022-05-19 16:25:05.391 INFO maldi_data - __init__: Initializing MaldiData object	MemTotal: 247.609375
2022-05-19 16:25:05.469 INFO maldi_data - __init__: MaldiData object instantiated	MemTotal: 279.37109375
2022-05-19 16:25:05.469 INFO atlas - __init__: Initializing Atlas object	MemTotal: 279.37109375
2022-05-19 16:25:05.730 INFO storage - return_shelved_object: Returning atlas/atlas_objects/dic_acronym_children_id from shelve file.	MemTotal: 289.2109375
2022-05-19 16:25:06.784 INFO storage - return_shelved_object: Returning atlas/atlas_objects/hierarchy from shelve file.	MemTotal: 510.2890625
2022-05-19 16:25:06.904 INFO storage - return_shelved_object: Returning atlas/atlas_objects/arrays_projection_corrected_True_True from shelve file.	MemTotal: 510.3046875
2022-05-19 16:25:07.495 INFO storage - return_shelved_object: Returning atlas/atlas_objects/arrays_projection_corrected_True_True from shelve file.	MemTotal: 661.42578125
2022-05-19 16:25:08.214 INFO atlas - __init__: Atlas object instantiated	MemTotal: 694.796875
2022-05-19 16:25:08.214 INFO figures - __init__: Initializing Figures object	MemTotal: 694.796875
2022-05-19 16:25:08.332 INFO storage - return_shelved_object: Returning figures/lipid_selection/dic_normalization_factors_None from shelve file.	MemTotal: 694.921875
2022-05-19 16:25:09.040 INFO figures - __init__: Figures object instantiated	MemTotal: 695.1796875
2022-05-19 16:25:09.041 INFO app - <module>: Memory use after three main object have been instantiated	MemTotal: 695.1796875
2022-05-19 16:25:09.291 INFO launch - run_compiled_functions: Please wait while compiled functions are executed...
2022-05-19 16:25:19.890 INFO figures - compute_3D_volume_figure: Starting 3D volume computation
2022-05-19 16:25:20.011 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_annotation_6 from shelve file.	MemTotal: 832.5
2022-05-19 16:25:20.625 INFO figures - compute_3D_volume_figure: Computed basic structure array
2022-05-19 16:25:20.744 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 838.09375
2022-05-19 16:25:20.864 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 838.09375
2022-05-19 16:25:20.983 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 838.09375
2022-05-19 16:25:20.984 INFO figures - compute_3D_volume_figure: Averaged expression over all lipids
2022-05-19 16:25:20.984 INFO figures - compute_array_coordinates_3D: Starting computing 3D arrays	MemTotal: 838.09375
2022-05-19 16:25:20.984 DEBUG figures - compute_array_coordinates_3D: Size array_x: 19.53
2022-05-19 16:25:20.984 INFO figures - compute_array_coordinates_3D: Starting slice iteration	MemTotal: 838.09375
2022-05-19 16:25:20.992 INFO figures - compute_3D_volume_figure: Computed array of expression in original space
2022-05-19 16:25:21.325 INFO figures - compute_3D_volume_figure: Filled basic structure array with array of expression
2022-05-19 16:25:21.334 INFO figures - compute_3D_volume_figure: Built arrays of coordinates
2022-05-19 16:25:22.145 INFO figures - compute_3D_volume_figure: Cropped the figure to only keep areas in which lipids are expressed
2022-05-19 16:25:22.759 INFO figures - compute_3D_volume_figure: Finished interpolation betwee slices
2022-05-19 16:25:22.878 INFO storage - return_shelved_object: Returning figures/3D_page/volume_root from shelve file.	MemTotal: 854.96484375
2022-05-19 16:25:22.897 INFO figures - compute_3D_volume_figure: Building final figure
2022-05-19 16:25:23.044 INFO figures - compute_3D_volume_figure: Done computing 3D volume figure
2022-05-19 16:25:23.047 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 16:25:23.047 INFO launch - run_compiled_functions: Compiled functions executed.
2022-05-19 16:25:23.168 INFO app - <module>: Memory use after main functions have been compiled	MemTotal: 807.421875
2022-05-19 16:25:23.190 DEBUG filesystemcache - set: set key '__wz_cache_count'
2022-05-19 16:25:23.191 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:25:23.191 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 16:25:23.191 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:25:23.191 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 16:25:23.335 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 810.03125
2022-05-19 16:25:23.352 INFO figures - compute_heatmap_per_mz: Starting figure computation, from mz boundaries
2022-05-19 16:25:23.352 INFO figures - compute_heatmap_per_mz: Getting image array
2022-05-19 16:25:23.352 INFO figures - compute_image_per_lipid: Entering compute_image_per_lipid
2022-05-19 16:25:23.352 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_image_using_index_and_image_lookup 
2022-05-19 16:25:23.352 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 16:25:23.352 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:25:23.353 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 16:25:24.010 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:25:24.010 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 16:25:24.010 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 16:25:24.010 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 16:25:24.011 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:25:24.011 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 16:25:24.011 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:25:24.011 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 16:25:24.011 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 16:25:24.417 INFO figures - build_lipid_heatmap_from_image: Converting image to string
2022-05-19 16:25:24.417 INFO image - convert_image_to_base64: Entering string conversion function
2022-05-19 16:25:24.455 INFO image - convert_image_to_base64: Image has been converted from array to PIL image
2022-05-19 16:25:24.492 INFO image - convert_image_to_base64: Empty pixels are now transparent
2022-05-19 16:25:24.511 INFO image - convert_image_to_base64: png mode selected, quality argument is not supported
2022-05-19 16:25:24.534 INFO image - convert_image_to_base64: Image has been converted to base64. Returning it now.
2022-05-19 16:25:24.535 INFO figures - build_lipid_heatmap_from_image: Converting image to go image
2022-05-19 16:25:24.559 INFO figures - build_lipid_heatmap_from_image: Returning figure
2022-05-19 16:25:24.684 INFO storage - return_shelved_object: Returning annotations/lipid_options from shelve file.	MemTotal: 813.14453125
2022-05-19 16:25:24.842 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 813.2109375
2022-05-19 16:25:24.984 INFO storage - return_shelved_object: Returning figures/atlas_page/3D/treemaps from shelve file.	MemTotal: 813.2109375
[2022-05-19 16:30:46 +0200] [415593] [INFO] Worker exiting (pid: 415593)
allen mouse atlas (res. 100um)
From: http://www.brain-map.org (Wang et al 2020, https://doi.org/10.1016/j.cell.2020.04.007 )
[2022-05-19 16:30:47 +0200] [402228] [INFO] Booting worker with pid: 402228
2022-05-19 16:30:47.603 INFO main - <module>: Starting import chain	MemTotal: 34.234375
2022-05-19 16:30:49.825 INFO app - <module>: Memory use before any global variable declaration	MemTotal: 247.4140625
2022-05-19 16:30:49.825 INFO maldi_data - __init__: Initializing MaldiData object	MemTotal: 247.4140625
2022-05-19 16:30:49.899 INFO maldi_data - __init__: MaldiData object instantiated	MemTotal: 279.375
2022-05-19 16:30:49.900 INFO atlas - __init__: Initializing Atlas object	MemTotal: 279.375
2022-05-19 16:30:50.153 INFO storage - return_shelved_object: Returning atlas/atlas_objects/dic_acronym_children_id from shelve file.	MemTotal: 289.21484375
2022-05-19 16:30:51.142 INFO storage - return_shelved_object: Returning atlas/atlas_objects/hierarchy from shelve file.	MemTotal: 510.08203125
2022-05-19 16:30:51.254 INFO storage - return_shelved_object: Returning atlas/atlas_objects/arrays_projection_corrected_True_True from shelve file.	MemTotal: 510.4375
2022-05-19 16:30:51.800 INFO storage - return_shelved_object: Returning atlas/atlas_objects/arrays_projection_corrected_True_True from shelve file.	MemTotal: 661.41796875
2022-05-19 16:30:52.477 INFO atlas - __init__: Atlas object instantiated	MemTotal: 694.84375
2022-05-19 16:30:52.477 INFO figures - __init__: Initializing Figures object	MemTotal: 694.84375
2022-05-19 16:30:52.587 INFO storage - return_shelved_object: Returning figures/lipid_selection/dic_normalization_factors_None from shelve file.	MemTotal: 695.0078125
2022-05-19 16:30:53.267 INFO figures - __init__: Figures object instantiated	MemTotal: 695.0078125
2022-05-19 16:30:53.267 INFO app - <module>: Memory use after three main object have been instantiated	MemTotal: 695.0078125
2022-05-19 16:30:53.512 INFO launch - run_compiled_functions: Please wait while compiled functions are executed...
2022-05-19 16:31:03.640 INFO figures - compute_3D_volume_figure: Starting 3D volume computation
2022-05-19 16:31:03.751 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_annotation_6 from shelve file.	MemTotal: 832.62890625
2022-05-19 16:31:04.332 INFO figures - compute_3D_volume_figure: Computed basic structure array
2022-05-19 16:31:04.446 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 838.35546875
2022-05-19 16:31:04.559 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 838.35546875
2022-05-19 16:31:04.668 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 838.35546875
2022-05-19 16:31:04.669 INFO figures - compute_3D_volume_figure: Averaged expression over all lipids
2022-05-19 16:31:04.669 INFO figures - compute_array_coordinates_3D: Starting computing 3D arrays	MemTotal: 838.35546875
2022-05-19 16:31:04.669 DEBUG figures - compute_array_coordinates_3D: Size array_x: 19.53
2022-05-19 16:31:04.669 INFO figures - compute_array_coordinates_3D: Starting slice iteration	MemTotal: 838.36328125
2022-05-19 16:31:04.682 INFO figures - compute_3D_volume_figure: Computed array of expression in original space
2022-05-19 16:31:04.988 INFO figures - compute_3D_volume_figure: Filled basic structure array with array of expression
2022-05-19 16:31:04.997 INFO figures - compute_3D_volume_figure: Built arrays of coordinates
2022-05-19 16:31:05.751 INFO figures - compute_3D_volume_figure: Cropped the figure to only keep areas in which lipids are expressed
2022-05-19 16:31:06.277 INFO figures - compute_3D_volume_figure: Finished interpolation betwee slices
2022-05-19 16:31:06.382 INFO storage - return_shelved_object: Returning figures/3D_page/volume_root from shelve file.	MemTotal: 855.0625
2022-05-19 16:31:06.400 INFO figures - compute_3D_volume_figure: Building final figure
2022-05-19 16:31:06.537 INFO figures - compute_3D_volume_figure: Done computing 3D volume figure
2022-05-19 16:31:06.543 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 16:31:06.543 INFO launch - run_compiled_functions: Compiled functions executed.
2022-05-19 16:31:06.645 INFO app - <module>: Memory use after main functions have been compiled	MemTotal: 806.8203125
2022-05-19 16:31:06.665 DEBUG filesystemcache - set: set key '__wz_cache_count'
2022-05-19 16:31:06.665 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:31:06.665 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 16:31:06.665 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:31:06.665 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 16:31:06.786 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 809.31640625
2022-05-19 16:31:06.801 INFO figures - compute_heatmap_per_mz: Starting figure computation, from mz boundaries
2022-05-19 16:31:06.801 INFO figures - compute_heatmap_per_mz: Getting image array
2022-05-19 16:31:06.801 INFO figures - compute_image_per_lipid: Entering compute_image_per_lipid
2022-05-19 16:31:06.801 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_image_using_index_and_image_lookup 
2022-05-19 16:31:06.801 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 16:31:06.801 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:31:06.801 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 16:31:07.366 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:31:07.367 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 16:31:07.367 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 16:31:07.367 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 16:31:07.367 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:31:07.367 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 16:31:07.368 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:31:07.368 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 16:31:07.368 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 16:31:07.768 INFO figures - build_lipid_heatmap_from_image: Converting image to string
2022-05-19 16:31:07.768 INFO image - convert_image_to_base64: Entering string conversion function
2022-05-19 16:31:07.805 INFO image - convert_image_to_base64: Image has been converted from array to PIL image
2022-05-19 16:31:07.840 INFO image - convert_image_to_base64: Empty pixels are now transparent
2022-05-19 16:31:07.856 INFO image - convert_image_to_base64: png mode selected, quality argument is not supported
2022-05-19 16:31:07.876 INFO image - convert_image_to_base64: Image has been converted to base64. Returning it now.
2022-05-19 16:31:07.876 INFO figures - build_lipid_heatmap_from_image: Converting image to go image
2022-05-19 16:31:07.898 INFO figures - build_lipid_heatmap_from_image: Returning figure
2022-05-19 16:31:08.003 INFO storage - return_shelved_object: Returning annotations/lipid_options from shelve file.	MemTotal: 813.30078125
2022-05-19 16:31:08.134 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 813.30078125
2022-05-19 16:31:08.250 INFO storage - return_shelved_object: Returning figures/atlas_page/3D/treemaps from shelve file.	MemTotal: 813.30078125
[2022-05-19 16:33:21 +0200] [402228] [INFO] Worker exiting (pid: 402228)
allen mouse atlas (res. 100um)
From: http://www.brain-map.org (Wang et al 2020, https://doi.org/10.1016/j.cell.2020.04.007 )
[2022-05-19 16:33:22 +0200] [403042] [INFO] Booting worker with pid: 403042
2022-05-19 16:33:22.505 INFO main - <module>: Starting import chain	MemTotal: 34.234375
2022-05-19 16:33:24.426 INFO app - <module>: Memory use before any global variable declaration	MemTotal: 247.640625
2022-05-19 16:33:24.426 INFO maldi_data - __init__: Initializing MaldiData object	MemTotal: 247.640625
2022-05-19 16:33:24.484 INFO maldi_data - __init__: MaldiData object instantiated	MemTotal: 279.39453125
2022-05-19 16:33:24.485 INFO atlas - __init__: Initializing Atlas object	MemTotal: 279.39453125
2022-05-19 16:33:24.712 INFO storage - return_shelved_object: Returning atlas/atlas_objects/dic_acronym_children_id from shelve file.	MemTotal: 289.234375
2022-05-19 16:33:25.671 INFO storage - return_shelved_object: Returning atlas/atlas_objects/hierarchy from shelve file.	MemTotal: 510.1015625
2022-05-19 16:33:25.774 INFO storage - return_shelved_object: Returning atlas/atlas_objects/arrays_projection_corrected_True_True from shelve file.	MemTotal: 510.46875
2022-05-19 16:33:26.307 INFO storage - return_shelved_object: Returning atlas/atlas_objects/arrays_projection_corrected_True_True from shelve file.	MemTotal: 661.44140625
2022-05-19 16:33:26.969 INFO atlas - __init__: Atlas object instantiated	MemTotal: 694.8671875
2022-05-19 16:33:26.969 INFO figures - __init__: Initializing Figures object	MemTotal: 694.8671875
2022-05-19 16:33:27.069 INFO storage - return_shelved_object: Returning figures/lipid_selection/dic_normalization_factors_None from shelve file.	MemTotal: 694.984375
2022-05-19 16:33:27.662 INFO figures - __init__: Figures object instantiated	MemTotal: 694.984375
2022-05-19 16:33:27.662 INFO app - <module>: Memory use after three main object have been instantiated	MemTotal: 694.984375
2022-05-19 16:33:27.872 INFO launch - run_compiled_functions: Please wait while compiled functions are executed...
2022-05-19 16:33:37.327 INFO figures - compute_3D_volume_figure: Starting 3D volume computation
2022-05-19 16:33:37.429 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_annotation_6 from shelve file.	MemTotal: 832.6171875
2022-05-19 16:33:37.953 INFO figures - compute_3D_volume_figure: Computed basic structure array
2022-05-19 16:33:38.058 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 838.22265625
2022-05-19 16:33:38.161 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 838.22265625
2022-05-19 16:33:38.264 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 838.22265625
2022-05-19 16:33:38.264 INFO figures - compute_3D_volume_figure: Averaged expression over all lipids
2022-05-19 16:33:38.265 INFO figures - compute_array_coordinates_3D: Starting computing 3D arrays	MemTotal: 838.22265625
2022-05-19 16:33:38.265 DEBUG figures - compute_array_coordinates_3D: Size array_x: 19.53
2022-05-19 16:33:38.265 INFO figures - compute_array_coordinates_3D: Starting slice iteration	MemTotal: 838.22265625
2022-05-19 16:33:38.276 INFO figures - compute_3D_volume_figure: Computed array of expression in original space
2022-05-19 16:33:38.549 INFO figures - compute_3D_volume_figure: Filled basic structure array with array of expression
2022-05-19 16:33:38.556 INFO figures - compute_3D_volume_figure: Built arrays of coordinates
2022-05-19 16:33:39.254 INFO figures - compute_3D_volume_figure: Cropped the figure to only keep areas in which lipids are expressed
2022-05-19 16:33:39.774 INFO figures - compute_3D_volume_figure: Finished interpolation betwee slices
2022-05-19 16:33:39.876 INFO storage - return_shelved_object: Returning figures/3D_page/volume_root from shelve file.	MemTotal: 854.83203125
2022-05-19 16:33:39.893 INFO figures - compute_3D_volume_figure: Building final figure
2022-05-19 16:33:40.020 INFO figures - compute_3D_volume_figure: Done computing 3D volume figure
2022-05-19 16:33:40.025 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 16:33:40.025 INFO launch - run_compiled_functions: Compiled functions executed.
2022-05-19 16:33:40.126 INFO app - <module>: Memory use after main functions have been compiled	MemTotal: 806.6875
2022-05-19 16:33:40.143 DEBUG filesystemcache - set: set key '__wz_cache_count'
2022-05-19 16:33:40.143 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:33:40.143 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 16:33:40.143 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:33:40.144 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 16:33:40.267 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 809.03515625
2022-05-19 16:33:40.281 INFO figures - compute_heatmap_per_mz: Starting figure computation, from mz boundaries
2022-05-19 16:33:40.281 INFO figures - compute_heatmap_per_mz: Getting image array
2022-05-19 16:33:40.281 INFO figures - compute_image_per_lipid: Entering compute_image_per_lipid
2022-05-19 16:33:40.281 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_image_using_index_and_image_lookup 
2022-05-19 16:33:40.281 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 16:33:40.281 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:33:40.281 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 16:33:40.860 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:33:40.860 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 16:33:40.860 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 16:33:40.860 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 16:33:40.860 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:33:40.860 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 16:33:40.861 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:33:40.861 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 16:33:40.861 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 16:33:41.239 INFO figures - build_lipid_heatmap_from_image: Converting image to string
2022-05-19 16:33:41.239 INFO image - convert_image_to_base64: Entering string conversion function
2022-05-19 16:33:41.277 INFO image - convert_image_to_base64: Image has been converted from array to PIL image
2022-05-19 16:33:41.312 INFO image - convert_image_to_base64: Empty pixels are now transparent
2022-05-19 16:33:41.329 INFO image - convert_image_to_base64: png mode selected, quality argument is not supported
2022-05-19 16:33:41.349 INFO image - convert_image_to_base64: Image has been converted to base64. Returning it now.
2022-05-19 16:33:41.349 INFO figures - build_lipid_heatmap_from_image: Converting image to go image
2022-05-19 16:33:41.371 INFO figures - build_lipid_heatmap_from_image: Returning figure
2022-05-19 16:33:41.477 INFO storage - return_shelved_object: Returning annotations/lipid_options from shelve file.	MemTotal: 813.12890625
2022-05-19 16:33:41.609 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 813.12890625
2022-05-19 16:33:41.728 INFO storage - return_shelved_object: Returning figures/atlas_page/3D/treemaps from shelve file.	MemTotal: 813.12890625
[2022-05-19 16:33:50 +0200] [453629] [WARNING] Worker with pid 403042 was terminated due to signal 4
[2022-05-19 16:33:50 +0200] [403082] [INFO] Booting worker with pid: 403082
2022-05-19 16:33:50.846 INFO main - <module>: Starting import chain	MemTotal: 34.234375
2022-05-19 16:33:52.955 INFO app - <module>: Memory use before any global variable declaration	MemTotal: 247.51171875
2022-05-19 16:33:52.955 INFO maldi_data - __init__: Initializing MaldiData object	MemTotal: 247.51171875
2022-05-19 16:33:53.017 INFO maldi_data - __init__: MaldiData object instantiated	MemTotal: 279.375
2022-05-19 16:33:53.017 INFO atlas - __init__: Initializing Atlas object	MemTotal: 279.375
2022-05-19 16:33:53.250 INFO storage - return_shelved_object: Returning atlas/atlas_objects/dic_acronym_children_id from shelve file.	MemTotal: 289.21484375
2022-05-19 16:33:54.240 INFO storage - return_shelved_object: Returning atlas/atlas_objects/hierarchy from shelve file.	MemTotal: 510.08203125
2022-05-19 16:33:54.345 INFO storage - return_shelved_object: Returning atlas/atlas_objects/arrays_projection_corrected_True_True from shelve file.	MemTotal: 510.4375
2022-05-19 16:33:54.896 INFO storage - return_shelved_object: Returning atlas/atlas_objects/arrays_projection_corrected_True_True from shelve file.	MemTotal: 661.41796875
2022-05-19 16:33:55.558 INFO atlas - __init__: Atlas object instantiated	MemTotal: 694.84375
2022-05-19 16:33:55.559 INFO figures - __init__: Initializing Figures object	MemTotal: 694.84375
2022-05-19 16:33:55.661 INFO storage - return_shelved_object: Returning figures/lipid_selection/dic_normalization_factors_None from shelve file.	MemTotal: 695.0078125
2022-05-19 16:33:56.279 INFO figures - __init__: Figures object instantiated	MemTotal: 695.0078125
2022-05-19 16:33:56.279 INFO app - <module>: Memory use after three main object have been instantiated	MemTotal: 695.0078125
2022-05-19 16:33:56.499 INFO launch - run_compiled_functions: Please wait while compiled functions are executed...
2022-05-19 16:34:05.674 INFO figures - compute_3D_volume_figure: Starting 3D volume computation
2022-05-19 16:34:05.784 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_annotation_6 from shelve file.	MemTotal: 832.53515625
2022-05-19 16:34:06.339 INFO figures - compute_3D_volume_figure: Computed basic structure array
2022-05-19 16:34:06.441 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 838.14453125
2022-05-19 16:34:06.542 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 838.14453125
2022-05-19 16:34:06.644 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 838.14453125
2022-05-19 16:34:06.644 INFO figures - compute_3D_volume_figure: Averaged expression over all lipids
2022-05-19 16:34:06.645 INFO figures - compute_array_coordinates_3D: Starting computing 3D arrays	MemTotal: 838.14453125
2022-05-19 16:34:06.645 DEBUG figures - compute_array_coordinates_3D: Size array_x: 19.53
2022-05-19 16:34:06.645 INFO figures - compute_array_coordinates_3D: Starting slice iteration	MemTotal: 838.14453125
2022-05-19 16:34:06.655 INFO figures - compute_3D_volume_figure: Computed array of expression in original space
2022-05-19 16:34:06.946 INFO figures - compute_3D_volume_figure: Filled basic structure array with array of expression
2022-05-19 16:34:06.954 INFO figures - compute_3D_volume_figure: Built arrays of coordinates
2022-05-19 16:34:07.840 INFO figures - compute_3D_volume_figure: Cropped the figure to only keep areas in which lipids are expressed
2022-05-19 16:34:08.377 INFO figures - compute_3D_volume_figure: Finished interpolation betwee slices
2022-05-19 16:34:08.480 INFO storage - return_shelved_object: Returning figures/3D_page/volume_root from shelve file.	MemTotal: 855.140625
2022-05-19 16:34:08.500 INFO figures - compute_3D_volume_figure: Building final figure
2022-05-19 16:34:08.631 INFO figures - compute_3D_volume_figure: Done computing 3D volume figure
2022-05-19 16:34:08.636 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 16:34:08.636 INFO launch - run_compiled_functions: Compiled functions executed.
2022-05-19 16:34:08.738 INFO app - <module>: Memory use after main functions have been compiled	MemTotal: 806.89453125
2022-05-19 16:34:08.757 DEBUG filesystemcache - set: set key '__wz_cache_count'
2022-05-19 16:34:08.758 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:34:08.758 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 16:34:08.758 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:34:08.758 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 16:34:08.881 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 809.33984375
2022-05-19 16:34:08.895 INFO figures - compute_heatmap_per_mz: Starting figure computation, from mz boundaries
2022-05-19 16:34:08.895 INFO figures - compute_heatmap_per_mz: Getting image array
2022-05-19 16:34:08.895 INFO figures - compute_image_per_lipid: Entering compute_image_per_lipid
2022-05-19 16:34:08.895 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_image_using_index_and_image_lookup 
2022-05-19 16:34:08.896 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 16:34:08.896 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:34:08.896 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 16:34:09.487 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:34:09.488 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 16:34:09.488 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 16:34:09.488 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 16:34:09.488 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:34:09.488 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 16:34:09.489 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:34:09.489 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 16:34:09.489 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 16:34:09.972 INFO figures - build_lipid_heatmap_from_image: Converting image to string
2022-05-19 16:34:09.972 INFO image - convert_image_to_base64: Entering string conversion function
2022-05-19 16:34:10.007 INFO image - convert_image_to_base64: Image has been converted from array to PIL image
2022-05-19 16:34:10.038 INFO image - convert_image_to_base64: Empty pixels are now transparent
2022-05-19 16:34:10.055 INFO image - convert_image_to_base64: png mode selected, quality argument is not supported
2022-05-19 16:34:10.076 INFO image - convert_image_to_base64: Image has been converted to base64. Returning it now.
2022-05-19 16:34:10.076 INFO figures - build_lipid_heatmap_from_image: Converting image to go image
2022-05-19 16:34:10.099 INFO figures - build_lipid_heatmap_from_image: Returning figure
2022-05-19 16:34:10.210 INFO storage - return_shelved_object: Returning annotations/lipid_options from shelve file.	MemTotal: 812.578125
2022-05-19 16:34:10.346 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 812.578125
2022-05-19 16:34:10.465 INFO storage - return_shelved_object: Returning figures/atlas_page/3D/treemaps from shelve file.	MemTotal: 812.64453125
[2022-05-19 16:34:10 +0200] [403082] [INFO] Worker exiting (pid: 403082)
allen mouse atlas (res. 100um)
From: http://www.brain-map.org (Wang et al 2020, https://doi.org/10.1016/j.cell.2020.04.007 )
[2022-05-19 16:34:11 +0200] [403192] [INFO] Booting worker with pid: 403192
2022-05-19 16:34:11.792 INFO main - <module>: Starting import chain	MemTotal: 34.234375
2022-05-19 16:34:13.711 INFO app - <module>: Memory use before any global variable declaration	MemTotal: 247.64453125
2022-05-19 16:34:13.711 INFO maldi_data - __init__: Initializing MaldiData object	MemTotal: 247.64453125
2022-05-19 16:34:13.814 INFO maldi_data - __init__: MaldiData object instantiated	MemTotal: 279.37109375
2022-05-19 16:34:13.814 INFO atlas - __init__: Initializing Atlas object	MemTotal: 279.37109375
2022-05-19 16:34:14.044 INFO storage - return_shelved_object: Returning atlas/atlas_objects/dic_acronym_children_id from shelve file.	MemTotal: 289.2109375
2022-05-19 16:34:15.019 INFO storage - return_shelved_object: Returning atlas/atlas_objects/hierarchy from shelve file.	MemTotal: 510.078125
2022-05-19 16:34:15.120 INFO storage - return_shelved_object: Returning atlas/atlas_objects/arrays_projection_corrected_True_True from shelve file.	MemTotal: 510.4375
2022-05-19 16:34:15.666 INFO storage - return_shelved_object: Returning atlas/atlas_objects/arrays_projection_corrected_True_True from shelve file.	MemTotal: 661.4140625
2022-05-19 16:34:16.318 INFO atlas - __init__: Atlas object instantiated	MemTotal: 694.83984375
2022-05-19 16:34:16.318 INFO figures - __init__: Initializing Figures object	MemTotal: 694.83984375
2022-05-19 16:34:16.417 INFO storage - return_shelved_object: Returning figures/lipid_selection/dic_normalization_factors_None from shelve file.	MemTotal: 695.0
2022-05-19 16:34:17.004 INFO figures - __init__: Figures object instantiated	MemTotal: 695.0
2022-05-19 16:34:17.004 INFO app - <module>: Memory use after three main object have been instantiated	MemTotal: 695.0
2022-05-19 16:34:17.213 INFO launch - run_compiled_functions: Please wait while compiled functions are executed...
2022-05-19 16:34:26.177 INFO figures - compute_3D_volume_figure: Starting 3D volume computation
2022-05-19 16:34:26.278 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_annotation_6 from shelve file.	MemTotal: 832.734375
2022-05-19 16:34:26.796 INFO figures - compute_3D_volume_figure: Computed basic structure array
2022-05-19 16:34:26.896 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 838.3359375
2022-05-19 16:34:26.996 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 838.3359375
2022-05-19 16:34:27.096 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 838.3359375
2022-05-19 16:34:27.096 INFO figures - compute_3D_volume_figure: Averaged expression over all lipids
2022-05-19 16:34:27.096 INFO figures - compute_array_coordinates_3D: Starting computing 3D arrays	MemTotal: 838.3359375
2022-05-19 16:34:27.096 DEBUG figures - compute_array_coordinates_3D: Size array_x: 19.53
2022-05-19 16:34:27.096 INFO figures - compute_array_coordinates_3D: Starting slice iteration	MemTotal: 838.3359375
2022-05-19 16:34:27.103 INFO figures - compute_3D_volume_figure: Computed array of expression in original space
2022-05-19 16:34:27.376 INFO figures - compute_3D_volume_figure: Filled basic structure array with array of expression
2022-05-19 16:34:27.383 INFO figures - compute_3D_volume_figure: Built arrays of coordinates
2022-05-19 16:34:28.066 INFO figures - compute_3D_volume_figure: Cropped the figure to only keep areas in which lipids are expressed
2022-05-19 16:34:28.590 INFO figures - compute_3D_volume_figure: Finished interpolation betwee slices
2022-05-19 16:34:28.697 INFO storage - return_shelved_object: Returning figures/3D_page/volume_root from shelve file.	MemTotal: 855.05078125
2022-05-19 16:34:28.715 INFO figures - compute_3D_volume_figure: Building final figure
2022-05-19 16:34:28.847 INFO figures - compute_3D_volume_figure: Done computing 3D volume figure
2022-05-19 16:34:28.852 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 16:34:28.852 INFO launch - run_compiled_functions: Compiled functions executed.
2022-05-19 16:34:28.958 INFO app - <module>: Memory use after main functions have been compiled	MemTotal: 806.8046875
2022-05-19 16:34:28.977 DEBUG filesystemcache - set: set key '__wz_cache_count'
2022-05-19 16:34:28.977 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:34:28.977 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 16:34:28.977 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:34:28.977 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 16:34:29.104 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 809.23828125
2022-05-19 16:34:29.119 INFO figures - compute_heatmap_per_mz: Starting figure computation, from mz boundaries
2022-05-19 16:34:29.119 INFO figures - compute_heatmap_per_mz: Getting image array
2022-05-19 16:34:29.119 INFO figures - compute_image_per_lipid: Entering compute_image_per_lipid
2022-05-19 16:34:29.119 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_image_using_index_and_image_lookup 
2022-05-19 16:34:29.119 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 16:34:29.119 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:34:29.119 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 16:34:29.710 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:34:29.710 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 16:34:29.710 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 16:34:29.710 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 16:34:29.711 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:34:29.711 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 16:34:29.711 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:34:29.711 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 16:34:29.711 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 16:34:30.218 INFO figures - build_lipid_heatmap_from_image: Converting image to string
2022-05-19 16:34:30.218 INFO image - convert_image_to_base64: Entering string conversion function
2022-05-19 16:34:30.253 INFO image - convert_image_to_base64: Image has been converted from array to PIL image
2022-05-19 16:34:30.285 INFO image - convert_image_to_base64: Empty pixels are now transparent
2022-05-19 16:34:30.301 INFO image - convert_image_to_base64: png mode selected, quality argument is not supported
2022-05-19 16:34:30.321 INFO image - convert_image_to_base64: Image has been converted to base64. Returning it now.
2022-05-19 16:34:30.321 INFO figures - build_lipid_heatmap_from_image: Converting image to go image
2022-05-19 16:34:30.344 INFO figures - build_lipid_heatmap_from_image: Returning figure
2022-05-19 16:34:30.461 INFO storage - return_shelved_object: Returning annotations/lipid_options from shelve file.	MemTotal: 813.23046875
2022-05-19 16:34:30.611 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 813.23046875
2022-05-19 16:34:30.745 INFO storage - return_shelved_object: Returning figures/atlas_page/3D/treemaps from shelve file.	MemTotal: 813.23046875
[2022-05-19 16:34:44 +0200] [403192] [INFO] Worker exiting (pid: 403192)
allen mouse atlas (res. 100um)
From: http://www.brain-map.org (Wang et al 2020, https://doi.org/10.1016/j.cell.2020.04.007 )
[2022-05-19 16:34:46 +0200] [403245] [INFO] Booting worker with pid: 403245
2022-05-19 16:34:46.468 INFO main - <module>: Starting import chain	MemTotal: 34.234375
2022-05-19 16:34:48.408 INFO app - <module>: Memory use before any global variable declaration	MemTotal: 247.640625
2022-05-19 16:34:48.408 INFO maldi_data - __init__: Initializing MaldiData object	MemTotal: 247.640625
2022-05-19 16:34:48.474 INFO maldi_data - __init__: MaldiData object instantiated	MemTotal: 279.3671875
2022-05-19 16:34:48.474 INFO atlas - __init__: Initializing Atlas object	MemTotal: 279.3671875
2022-05-19 16:34:48.698 INFO storage - return_shelved_object: Returning atlas/atlas_objects/dic_acronym_children_id from shelve file.	MemTotal: 289.203125
2022-05-19 16:34:49.656 INFO storage - return_shelved_object: Returning atlas/atlas_objects/hierarchy from shelve file.	MemTotal: 510.07421875
2022-05-19 16:34:49.756 INFO storage - return_shelved_object: Returning atlas/atlas_objects/arrays_projection_corrected_True_True from shelve file.	MemTotal: 510.4453125
2022-05-19 16:34:50.293 INFO storage - return_shelved_object: Returning atlas/atlas_objects/arrays_projection_corrected_True_True from shelve file.	MemTotal: 661.41015625
2022-05-19 16:34:50.943 INFO atlas - __init__: Atlas object instantiated	MemTotal: 694.83984375
2022-05-19 16:34:50.943 INFO figures - __init__: Initializing Figures object	MemTotal: 694.83984375
2022-05-19 16:34:51.042 INFO storage - return_shelved_object: Returning figures/lipid_selection/dic_normalization_factors_None from shelve file.	MemTotal: 694.98046875
2022-05-19 16:34:51.640 INFO figures - __init__: Figures object instantiated	MemTotal: 694.98046875
2022-05-19 16:34:51.640 INFO app - <module>: Memory use after three main object have been instantiated	MemTotal: 694.98046875
2022-05-19 16:34:51.851 INFO launch - run_compiled_functions: Please wait while compiled functions are executed...
2022-05-19 16:35:01.939 INFO figures - compute_3D_volume_figure: Starting 3D volume computation
2022-05-19 16:35:02.060 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_annotation_6 from shelve file.	MemTotal: 832.4609375
2022-05-19 16:35:02.702 INFO figures - compute_3D_volume_figure: Computed basic structure array
2022-05-19 16:35:02.815 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 838.0703125
2022-05-19 16:35:02.933 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 838.2578125
2022-05-19 16:35:03.051 INFO storage - return_shelved_object: Returning figures/3D_page/arrays_expression___ from shelve file.	MemTotal: 838.2578125
2022-05-19 16:35:03.052 INFO figures - compute_3D_volume_figure: Averaged expression over all lipids
2022-05-19 16:35:03.052 INFO figures - compute_array_coordinates_3D: Starting computing 3D arrays	MemTotal: 838.2578125
2022-05-19 16:35:03.053 DEBUG figures - compute_array_coordinates_3D: Size array_x: 19.53
2022-05-19 16:35:03.053 INFO figures - compute_array_coordinates_3D: Starting slice iteration	MemTotal: 838.2734375
2022-05-19 16:35:03.061 INFO figures - compute_3D_volume_figure: Computed array of expression in original space
2022-05-19 16:35:03.416 INFO figures - compute_3D_volume_figure: Filled basic structure array with array of expression
2022-05-19 16:35:03.430 INFO figures - compute_3D_volume_figure: Built arrays of coordinates
2022-05-19 16:35:04.433 INFO figures - compute_3D_volume_figure: Cropped the figure to only keep areas in which lipids are expressed
2022-05-19 16:35:05.080 INFO figures - compute_3D_volume_figure: Finished interpolation betwee slices
2022-05-19 16:35:05.198 INFO storage - return_shelved_object: Returning figures/3D_page/volume_root from shelve file.	MemTotal: 855.140625
2022-05-19 16:35:05.222 INFO figures - compute_3D_volume_figure: Building final figure
2022-05-19 16:35:05.372 INFO figures - compute_3D_volume_figure: Done computing 3D volume figure
2022-05-19 16:35:05.378 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 16:35:05.378 INFO launch - run_compiled_functions: Compiled functions executed.
2022-05-19 16:35:05.497 INFO app - <module>: Memory use after main functions have been compiled	MemTotal: 806.89453125
2022-05-19 16:35:05.520 DEBUG filesystemcache - set: set key '__wz_cache_count'
2022-05-19 16:35:05.520 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:35:05.520 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 16:35:05.520 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:35:05.521 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 16:35:05.665 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 809.48046875
2022-05-19 16:35:05.685 INFO figures - compute_heatmap_per_mz: Starting figure computation, from mz boundaries
2022-05-19 16:35:05.685 INFO figures - compute_heatmap_per_mz: Getting image array
2022-05-19 16:35:05.685 INFO figures - compute_image_per_lipid: Entering compute_image_per_lipid
2022-05-19 16:35:05.686 INFO spectra - compute_thread_safe_function: Trying to compute the thread-safe version of function compute_image_using_index_and_image_lookup 
2022-05-19 16:35:05.686 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 16:35:05.686 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:35:05.686 DEBUG filesystemcache - set: set key 'locked-reading'
[2022-05-19 16:35:05 +0200] [453629] [INFO] Handling signal: term
2022-05-19 16:35:06.376 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:35:06.376 DEBUG filesystemcache - set: set key 'locked-reading'
2022-05-19 16:35:06.376 DEBUG filesystemcache - get: get key 'locked-reading' -> hit 
2022-05-19 16:35:06.376 DEBUG filesystemcache - get: get key 'locked-cleaning' -> hit 
2022-05-19 16:35:06.376 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:35:06.377 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 16:35:06.377 DEBUG filesystemcache - get: get key '__wz_cache_count' -> hit 
2022-05-19 16:35:06.377 DEBUG filesystemcache - set: set key 'locked-cleaning'
2022-05-19 16:35:06.377 INFO maldi_data - clean_memory: Memory cleaned
2022-05-19 16:35:06.845 INFO figures - build_lipid_heatmap_from_image: Converting image to string
2022-05-19 16:35:06.845 INFO image - convert_image_to_base64: Entering string conversion function
2022-05-19 16:35:06.892 INFO image - convert_image_to_base64: Image has been converted from array to PIL image
2022-05-19 16:35:06.935 INFO image - convert_image_to_base64: Empty pixels are now transparent
2022-05-19 16:35:06.953 INFO image - convert_image_to_base64: png mode selected, quality argument is not supported
2022-05-19 16:35:06.977 INFO image - convert_image_to_base64: Image has been converted to base64. Returning it now.
2022-05-19 16:35:06.977 INFO figures - build_lipid_heatmap_from_image: Converting image to go image
2022-05-19 16:35:07.003 INFO figures - build_lipid_heatmap_from_image: Returning figure
2022-05-19 16:35:07.124 INFO storage - return_shelved_object: Returning annotations/lipid_options from shelve file.	MemTotal: 812.6484375
2022-05-19 16:35:07.277 INFO storage - return_shelved_object: Returning figures/load_page/figure_basic_image_projection_corrected_0_False from shelve file.	MemTotal: 812.6484375
2022-05-19 16:35:07.414 INFO storage - return_shelved_object: Returning figures/atlas_page/3D/treemaps from shelve file.	MemTotal: 812.6484375
[2022-05-19 16:35:07 +0200] [403245] [INFO] Worker exiting (pid: 403245)
allen mouse atlas (res. 100um)
From: http://www.brain-map.org (Wang et al 2020, https://doi.org/10.1016/j.cell.2020.04.007 )
[2022-05-19 16:35:08 +0200] [453629] [INFO] Shutting down: Master
